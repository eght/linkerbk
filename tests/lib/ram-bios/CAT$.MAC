;; vim: set expandtab ai textwidth=80:
;; CreateModule
;; R0=0 --- создание модул€ (создание записи о модуле в каталоге).
;;              R1 --- адрес записи, которую нужно занести в каталог (ниже
;;                      100000);
;;              R2 --- код требуемого сегмента, если нужен определенный сегмент,
;;                      или 0 --- любой. ¬ процессе обработки R2 очищаетс€ по
;;                      маске #74000;
;;              ≈сли установлен бит #4 во флагах, то учитываютс€:
;;              - флаг #20;
;;              - код сегмента (т.е. R2 неравный 0);
;;              - требуемое смещение от начала сегмента.
;;
;; GetVersion
;; R0=12 --- возвращает информацию о RAM-BIOS.
;;              R0 --- номер версии.
;;              R1 --- физический адрес начала каталога модулей
;;                 (он находитс€ по данному адресу в системной странице в
;;                  SYS-режиме, код включени€ #2160)
;;              R2 --- количество записей в каталоге.
                .MACRO  CAT$ NUMBER
                .IF DIF R0 NUMBER
                mov     NUMBER,R0
                JSR     R5,@#167521
                .ENDC
                .ENDM

